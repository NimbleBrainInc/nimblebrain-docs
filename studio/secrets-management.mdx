---
title: 'Secrets Management'
description: 'Securely store and manage API keys and environment variables in NimbleBrain Studio'
icon: 'lock'
---

Manage sensitive credentials and configuration with encrypted, workspace-scoped secrets.

## What are Secrets?

Secrets are encrypted key-value pairs that are injected into your MCP servers as environment variables. They're used for:

- **API Keys**: Third-party service authentication (OpenAI, GitHub, AWS, etc.)
- **Database Credentials**: Connection strings and passwords
- **OAuth Tokens**: Service-to-service authentication
- **Configuration Values**: Sensitive settings that shouldn't be hardcoded

<Callout type="info">
  Secrets are encrypted at rest and in transit. They're only decrypted when injected into running server containers.
</Callout>

## Security Features

<CardGroup cols={2}>
  <Card title="Encryption at Rest" icon="shield">
    AES-256 encryption for stored secrets
  </Card>
  <Card title="Workspace Isolation" icon="lock">
    Secrets never cross workspace boundaries
  </Card>
  <Card title="Audit Logging" icon="file-lines">
    Track all secret access and modifications
  </Card>
  <Card title="Access Control" icon="users">
    Role-based permissions for secret management
  </Card>
</CardGroup>

## Managing Secrets

### Viewing Secrets

<Steps>
  <Step title="Navigate to Secrets">
    Click the **Secrets** tab in the main navigation
  </Step>
  <Step title="View Secret List">
    See all secrets in the current workspace (values are hidden)
  </Step>
  <Step title="Filter & Search">
    Use the search bar to find specific secrets
  </Step>
</Steps>

<Callout type="warning">
  Secret values are never displayed in the UI after creation. If you forget a value, you'll need to update it.
</Callout>

### Creating Secrets

<Steps>
  <Step title="Click Add Secret">
    From the Secrets tab, click **+ Add Secret**
  </Step>
  <Step title="Enter Key">
    Provide a secret name (uppercase with underscores):
    ```
    OPENAI_API_KEY
    DATABASE_URL
    GITHUB_TOKEN
    ```
  </Step>
  <Step title="Enter Value">
    Paste or type the secret value (will be hidden as you type)
  </Step>
  <Step title="Add Description">
    Optional: Add a description to help identify the secret's purpose
  </Step>
  <Step title="Save">
    Click **Create Secret** to encrypt and store it
  </Step>
</Steps>

### Secret Naming Conventions

Follow these best practices for secret keys:

✅ **Good Examples**:
```
OPENAI_API_KEY
DATABASE_CONNECTION_STRING
AWS_SECRET_ACCESS_KEY
STRIPE_WEBHOOK_SECRET
```

❌ **Avoid**:
```
my-secret          (use SNAKE_CASE, not kebab-case)
apikey             (be specific)
secret1            (use descriptive names)
```

<Callout type="tip">
  Use UPPERCASE with underscores (SCREAMING_SNAKE_CASE) to match environment variable conventions.
</Callout>

## Using Secrets in Servers

### Automatic Injection

Secrets are automatically injected as environment variables into all servers in the workspace:

<Frame>
```bash
# In your MCP server code, access secrets as environment variables
const apiKey = process.env.OPENAI_API_KEY;
const dbUrl = process.env.DATABASE_URL;
```
</Frame>

### Server-Specific Requirements

Some MCP servers require specific secrets to function. Check the server details in the Registry for required secrets:

<Tabs>
  <Tab title="finnhub-mcp">
    **Required Secrets**:
    - `FINNHUB_API_KEY` - API key from finnhub.io

    Get your key: https://finnhub.io/register
  </Tab>
  <Tab title="github-mcp">
    **Required Secrets**:
    - `GITHUB_TOKEN` - Personal access token
    - `GITHUB_REPO` - Repository name (org/repo)

    Generate token: https://github.com/settings/tokens
  </Tab>
  <Tab title="nationalparks-mcp">
    **Required Secrets**:
    - None (uses public API)
  </Tab>
</Tabs>

<Callout type="warning">
  Servers without required secrets will fail health checks and won't be available in Claude Desktop.
</Callout>

## Updating Secrets

Modify existing secret values:

<Steps>
  <Step title="Find Secret">
    Navigate to Secrets and locate the secret to update
  </Step>
  <Step title="Click Edit">
    Click the **Edit** button (pencil icon)
  </Step>
  <Step title="Enter New Value">
    Type or paste the new secret value
  </Step>
  <Step title="Save">
    Click **Update Secret**
  </Step>
  <Step title="Restart Servers">
    Servers must be restarted to pick up the new value
  </Step>
</Steps>

<Callout type="info">
  Secret updates don't automatically restart servers. Navigate to each server and manually restart it to apply changes.
</Callout>

## Deleting Secrets

Remove secrets that are no longer needed:

<Steps>
  <Step title="Locate Secret">
    Find the secret in the Secrets list
  </Step>
  <Step title="Click Delete">
    Click the **Delete** button (trash icon)
  </Step>
  <Step title="Confirm">
    Confirm deletion in the modal dialog
  </Step>
</Steps>

<Callout type="danger">
  Deleting a secret may cause servers to fail if they depend on it. Check server requirements before deleting.
</Callout>

## Secret Rotation

Regular secret rotation improves security:

<Steps>
  <Step title="Generate New Credential">
    Create a new API key/token in the external service
  </Step>
  <Step title="Update Secret in Studio">
    Update the secret value in NimbleBrain Studio
  </Step>
  <Step title="Restart Affected Servers">
    Restart all servers that use this secret
  </Step>
  <Step title="Verify Functionality">
    Test that servers are working with the new credential
  </Step>
  <Step title="Revoke Old Credential">
    Disable the old key/token in the external service
  </Step>
</Steps>

<Callout type="tip">
  Set calendar reminders to rotate secrets every 90 days for production workspaces.
</Callout>

## Common Secrets

### OpenAI API Key

Many MCP servers use OpenAI's API:

```bash
Secret Key: OPENAI_API_KEY
Value: sk-proj-...
Get Key: https://platform.openai.com/api-keys
```

### GitHub Personal Access Token

For GitHub-integrated servers:

```bash
Secret Key: GITHUB_TOKEN
Value: ghp_...
Get Token: https://github.com/settings/tokens
Required Scopes: repo, read:org
```

### AWS Credentials

For AWS-integrated servers:

```bash
Secret Keys:
  AWS_ACCESS_KEY_ID
  AWS_SECRET_ACCESS_KEY
  AWS_REGION (optional, defaults to us-east-1)

Get Credentials: AWS IAM Console
```

### Database Connection Strings

For servers with database access:

```bash
Secret Key: DATABASE_URL
Value: postgresql://user:pass@host:5432/dbname
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Server health check failing after adding secret">
    - Ensure the secret key name matches what the server expects (check server docs)
    - Verify the secret value is correct (no extra spaces, complete token)
    - Restart the server to pick up the new secret
  </Accordion>
  <Accordion title="Secret not available in server">
    - Confirm you're in the correct workspace
    - Check that the server was restarted after secret creation
    - View server logs for environment variable errors
  </Accordion>
  <Accordion title="Can't remember secret value">
    Secret values cannot be retrieved after creation for security. You'll need to:
    1. Generate a new credential in the external service
    2. Update the secret in Studio
    3. Restart affected servers
  </Accordion>
  <Accordion title="Error: Secret key already exists">
    Secret keys must be unique within a workspace. Either:
    - Use a different key name
    - Update the existing secret instead of creating a new one
  </Accordion>
</AccordionGroup>

## Best Practices

<CardGroup cols={2}>
  <Card title="Principle of Least Privilege" icon="shield-halved">
    Only grant API keys the minimum permissions needed. Use read-only keys when possible.
  </Card>
  <Card title="Separate Workspaces" icon="folders">
    Never share production secrets in development workspaces. Use separate keys per environment.
  </Card>
  <Card title="Regular Rotation" icon="rotate">
    Rotate secrets every 90 days, especially for production workspaces.
  </Card>
  <Card title="Audit Regularly" icon="clipboard-check">
    Review secret list monthly. Remove unused secrets to reduce attack surface.
  </Card>
</CardGroup>

## Related Documentation

<CardGroup cols={2}>
  <Card
    title="Server Management"
    icon="server"
    href="/studio/server-management"
  >
    Learn about server requirements and configuration
  </Card>
  <Card
    title="Workspace Management"
    icon="folder"
    href="/studio/workspace-management"
  >
    Understand workspace isolation and security
  </Card>
  <Card
    title="CLI: Secrets Commands"
    icon="terminal"
    href="/cli/commands/secrets/set"
  >
    Manage secrets via command line
  </Card>
  <Card
    title="Troubleshooting"
    icon="wrench"
    href="/dev/troubleshooting"
  >
    Common secret-related issues
  </Card>
</CardGroup>
